<!DOCTYPE html>
<html>
<head>
    <title>Interacting with Web3</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
</head>
<body>
    <h1>Interacting with Web3</h1>

    <button id="connectButton" onclick="connectWallet()">Connect Wallet</button>
    <button id="disconnectButton" style="display: none;" onclick="disconnectWallet()">Disconnect</button>

    <p id="walletStatus"></p>
    <p id="connectionStatus"></p>

    <div id="connectedSection" style="display: none;">
        <!-- Aquí puedes añadir los elementos para interactuar con las funciones de tu contrato Solidity -->
    </div>

    <script>
        let isConnected = false;

        async function connectWallet() {
            // Check if there is an instance of web3 already present
            if (window.ethereum) {
                window.web3 = new Web3(window.ethereum);
                try {
                    // Reset connection status
                    const connectionStatus = document.getElementById("connectionStatus");
                    connectionStatus.innerText = "";

                    // Request access to the wallet if needed
                    await window.ethereum.enable();
                    // Wallet access granted
                    console.log("Connection to wallet established!");

                    // Update UI
                    document.getElementById("connectButton").style.display = "none";
                    document.getElementById("disconnectButton").style.display = "inline";
                    document.getElementById("connectedSection").style.display = "block";
                    isConnected = true;
                } catch (error) {
                    // User denied wallet access
                    const connectionStatus = document.getElementById("connectionStatus");
                    connectionStatus.innerText = "Connection to wallet was denied. Please approve the connection to continue.";
                    console.error("User denied wallet access");
                }
            } else {
                // Wallet not installed in the browser
                const walletStatus = document.getElementById("walletStatus");
                walletStatus.innerText = "No Ethereum wallet detected. Please install MetaMask or another Ethereum-compatible wallet.";
            }
        }

        function disconnectWallet() {
            // Reset UI
            document.getElementById("connectButton").style.display = "inline";
            document.getElementById("disconnectButton").style.display = "none";
            document.getElementById("connectedSection").style.display = "none";
            isConnected = false;
        }
    </script>
</body>
</html>
